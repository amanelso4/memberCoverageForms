<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>

<div class="container-fluid">
  <div [hidden]="submitted">

    <body>
    <h3>Form Submission</h3>
    <div class="row">

      <br> <br>
      <div class="col-lg-4">

        <div class="container">
          <div [hidden]="submitted">

            <div class="row">
              <div class="col-lg-4">
                <label for="formType">Form type: </label> <br>
              </div>
              <div class="col-lg-8">
                <div class="form-group">
                  <select class="form-control"
                          id="formType"
                          required
                          [(ngModel)]="model.formType"
                          name="formType"
                          #formType="ngModel">
                    <option *ngFor="let formType of formTypes"
                            [value]="formType">{{formType}}</option>
                  </select>
                  <div [hidden]="formType.valid || formType.untouched" class="alert alert-danger">
                    Form type is required
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-4">
                <label for="coverageType">Coverage Type: </label>
              </div>

              <div class="col-lg-8">
                <div class="form-group">
                  <select class="form-control"
                          id="coverageType"
                          required
                          [(ngModel)]="model.coverageType"
                          name="coverageType"
                          #coverageType="ngModel">
                    <option *ngFor="let coverageType of coverageTypes" [value]="coverageType">{{coverageType}}</option>
                  </select>
                  <div [hidden]="coverageType.valid || coverageType.untouched" class="alert alert-danger">
                    Coverage Type is required
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-4">
                <label for="state">Coverage State(s): </label>
              </div>
              <div class="col-lg-8">
                <div class="form-group">
                  <select multiple
                          style="height: auto"
                          name="state"
                          class="form-control"
                          id="state"
                          required
                          [(ngModel)]="model.state"
                          #state="ngModel">
                    <option *ngFor="let state of states"
                            [value]="state">{{state}}</option>
                  </select>
                  <div [hidden]="state.valid || state.untouched" class="alert alert-danger">
                    State is required
                  </div>
                </div>


                <!--<ng-multiselect-dropdown
                  [placeholder]="'Select Coverages to Filter By'"
                  [data]="coveragesItems"
                  [(ngModel)]="selectedItems"
                  [settings]="dropdownSettings"
                  (onSelect)="updateCoverageFilter()"
                  (onSelectAll)="onSelectAll()"
                  (onDeSelect)="updateCoverageFilter()"
                  (onDeSelectAll)="onDeSelectAll()">
                </ng-multiselect-dropdown>-->


              </div>
            </div>
            <div class="row">
              <div class="col-lg-4">
                <label for="sourceSystem">Source System: </label>
              </div>
              <div class="col-lg-8">
                <div class="form-group">
                  <select class="form-control"
                          id="sourceSystem"
                          required
                          [(ngModel)]="model.sourceSystem"
                          name="state"
                          #sourceSystem="ngModel">
                    <option *ngFor="let sourceSystem of sourceSystems"
                            [value]="sourceSystem">{{sourceSystem}}</option>
                  </select>
                  <div [hidden]="sourceSystem.valid || sourceSystem.untouched" class="alert alert-danger">
                    Source System is required
                  </div>
                </div>
              </div>
            </div>


          </div>
        </div>
      </div>

      <div class="col-lg-4" style="background-color:white;">

        <div class="row">
          <div class="col-lg-4">
            <label for="name">Form Name: </label>
          </div>
          <div class="col-lg-8">
            <div class="form-group">
              <input type="text"
                     class="form-control" id="name"
                     required [(ngModel)]="model.name"
                     name="name"
                     #name="ngModel">
              <div [hidden]="name.valid || name.untouched" class="alert alert-danger">Name is required
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-4">
            <label for="formId">Form ID: </label>
          </div>
          <div class="col-lg-8">
            <div class="form-group">
              <input type="text"
                     class="form-control" id="formId"
                     required [(ngModel)]="model.formId"
                     name="formId"
                     #formId="ngModel">
              <div [hidden]="formId.valid || formId.untouched" class="alert alert-danger">Form ID is required
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-4">
            <label for="link">Form Link: </label>
          </div>
          <div class="col-lg-8">
            <div class="form-group">
              <input type="text"
                     class="form-control" id="link"
                     required [(ngModel)]="model.link"
                     name="link"
                     #link="ngModel">
              <div [hidden]="link.valid || link.untouched" class="alert alert-danger">Link is required
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-4">
            <label for="description">Form Description: </label>
          </div>
          <div class="col-lg-8">
            <div class="form-group">
              <input type="text"
                     class="form-control" id="description"
                     required [(ngModel)]="model.description"
                     name="description"
                     #description="ngModel">
              <div [hidden]="description.valid || description.untouched" class="alert alert-danger">Description is
                required
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="col-lg-4" style="background-color:white;">
        <div class="container">

          <button class="button button--primary-yellow" (click)="view=true">View Form</button>
          <div [hidden]="!view">
            <pdf-viewer
              [src]="'https://cors-anywhere.herokuapp.com/'+ model.link "
            ></pdf-viewer>
          </div>

        </div>
      </div>

    </div>

    <button class="button button--primary-yellow" (click)="submitted=true">Submit</button>
    <div class="divider"></div>
    <button class="button button--secondary" routerLink="/table" routerLinkActive="active">Cancel</button>

    </body>
  </div>
</div>

<! Confirmation Page begins>

<div [hidden]="!submitted">
  <h3>You are about to submit the Following: </h3>

  <table class="confirm">
    <tr>
      <th>Form Type</th>
      <td>{{model.formType}}</td>
    </tr>
    <tr>
      <th>Coverage Type</th>
      <td>{{model.coverageType}}</td>
    </tr>
    <tr>
      <th>Coverage State(s)</th>
      <td>{{model.state}}</td>
    </tr>
    <tr>
      <th>Source System</th>
      <td>{{model.sourceSystem}}</td>
    </tr>
    <tr>
      <th>Form Name</th>
      <td>{{model.name}}</td>
    </tr>
    <tr>
      <th>Form ID</th>
      <td>{{model.formId}}</td>
    </tr>
    <tr>
      <th>Form Link</th>
      <td>{{model.link}}</td>
    </tr>
    <tr>
      <th>Form Description</th>
      <td>{{model.description}}</td>
    </tr>

  </table>

  <br> <br> <br>

  <div class="row">

    <button class="button button--primary-yellow" routerLink="/table" routerLinkActive="active" (click)="add(model)">
      Upload to Database
    </button>
    <div class="divider"></div>
    <button class="button button--secondary" (click)="submitted=false; add(model); model.coverageType=''; model.state=''; model.sourceSystem=''; model.formType='';
    model.name=''; model.link=''; model.description=''; model.formId=''">Upload and Submit Another Form
    </button>
    <div class="divider"></div>
    <button class="button button--tertiary" routerLink="/table" routerLinkActive="active">Cancel</button>

  </div>

</div>
